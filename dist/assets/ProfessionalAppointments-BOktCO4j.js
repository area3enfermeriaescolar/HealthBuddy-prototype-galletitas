import{r as c,j as e}from"./index-t3TyDbTL.js";import{P as S}from"./ProfessionalLayout-DkntsXsu.js";/* empty css                              */const C=()=>{const t=new Date,o=new Date(t);o.setDate(t.getDate()+1);const a=i=>`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`;return{success:!0,data:[{id:2001,nre:"30012345",studentName:"NRE: 30012345",date:a(t),time:"10:30",duration:30,center:"IES Ibáñez Martín",status:"pending",type:"presencial",reason:"Consulta general"},{id:2002,nre:"30023456",studentName:"NRE: 30023456",date:a(t),time:"11:15",duration:30,center:"IES Ibáñez Martín",status:"pending",type:"presencial",reason:"Seguimiento"},{id:2003,nre:"30045678",studentName:"NRE: 30045678",date:a(o),time:"09:30",duration:30,center:"IES Mediterráneo",status:"pending",type:"presencial",reason:"Primera consulta"},{id:2004,nre:"30056789",studentName:"NRE: 30056789",date:a(o),time:"10:15",duration:30,center:"IES Mediterráneo",status:"pending",type:"virtual",reason:"Consulta nutricional"}]}},k=(t,o)=>(console.log(`Actualizando cita ${t} a estado: ${o}`),{success:!0,message:"Estado de la cita actualizado correctamente"}),v=()=>e.jsx("div",{style:{position:"fixed",top:10,right:10,background:"#00B7D8",color:"#fff",padding:"4px 12px",borderRadius:20,fontSize:"0.75rem",fontWeight:600,letterSpacing:.5,zIndex:1e3},children:"DEMO"}),n={primary:"#00B7D8",textDark:"#2C3E50",textMedium:"#4A6572",lightBg:"#F7FAFC",lightGrey:"#ECEFF1",accent:"#4CAF50",warning:"#FF9800",danger:"#E74C3C"},z=({appointment:t,onStatusChange:o})=>{const a=i=>{switch(i){case"completed":return n.accent;case"cancelled":return n.danger;case"pending":return n.warning;default:return n.textMedium}},d=i=>{switch(i){case"completed":return"Completada";case"cancelled":return"Cancelada";case"pending":return"Pendiente";default:return"Desconocido"}};return e.jsxs("div",{style:{background:"white",borderRadius:12,padding:16,marginBottom:12,boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12,flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:16,color:n.textDark},children:t.studentName}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:14,color:n.textMedium},children:t.center})]}),e.jsx("div",{style:{background:`${a(t.status)}10`,padding:"4px 10px",borderRadius:16,fontSize:12,color:a(t.status),fontWeight:500,marginTop:window.innerWidth<480?8:0},children:d(t.status)})]}),e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:12,flexWrap:"wrap"},children:[e.jsxs("div",{style:{background:n.lightBg,padding:"4px 10px",borderRadius:8,fontSize:13,color:n.textMedium,display:"flex",alignItems:"center",gap:4},children:[e.jsx("span",{children:"📅"})," ",t.date]}),e.jsxs("div",{style:{background:n.lightBg,padding:"4px 10px",borderRadius:8,fontSize:13,color:n.textMedium,display:"flex",alignItems:"center",gap:4},children:[e.jsx("span",{children:"⏰"})," ",t.time]}),e.jsxs("div",{style:{background:n.lightBg,padding:"4px 10px",borderRadius:8,fontSize:13,color:n.textMedium,display:"flex",alignItems:"center",gap:4},children:[e.jsx("span",{children:t.type==="presencial"?"🏥":"💻"})," ",t.type]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:window.innerWidth<480?"column":"row",gap:window.innerWidth<480?10:0},children:[e.jsxs("div",{style:{fontSize:14,color:n.textMedium,marginBottom:window.innerWidth<480?8:0},children:[e.jsx("span",{style:{fontWeight:500},children:"Motivo:"})," ",t.reason]}),e.jsxs("div",{style:{display:"flex",gap:8,width:window.innerWidth<480?"100%":"auto"},children:[t.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>o(t.id,"completed"),style:{background:n.accent,color:"white",border:"none",borderRadius:8,padding:"6px 12px",fontSize:13,cursor:"pointer",flex:window.innerWidth<480?1:"none"},children:"Completar"}),e.jsx("button",{onClick:()=>o(t.id,"cancelled"),style:{background:n.danger,color:"white",border:"none",borderRadius:8,padding:"6px 12px",fontSize:13,cursor:"pointer",flex:window.innerWidth<480?1:"none"},children:"Cancelar"})]}),t.status!=="pending"&&e.jsx("button",{onClick:()=>o(t.id,"pending"),style:{background:n.primary,color:"white",border:"none",borderRadius:8,padding:"6px 12px",fontSize:13,cursor:"pointer",width:window.innerWidth<480?"100%":"auto"},children:"Reactivar"})]})]})]})},R=({activeFilter:t,onFilterChange:o})=>{const a=[{id:"all",label:"Todas"},{id:"pending",label:"Pendientes"},{id:"completed",label:"Completadas"},{id:"cancelled",label:"Canceladas"}],d=window.innerWidth<480;return e.jsx("div",{style:{display:"flex",gap:8,overflowX:"auto",paddingBottom:8,marginBottom:16,flexWrap:d?"wrap":"nowrap"},children:a.map(i=>e.jsx("button",{onClick:()=>o(i.id),style:{background:t===i.id?n.primary:"white",color:t===i.id?"white":n.textMedium,border:`1px solid ${t===i.id?n.primary:n.lightGrey}`,borderRadius:20,padding:"6px 16px",fontSize:14,fontWeight:t===i.id?500:"normal",cursor:"pointer",whiteSpace:"nowrap",flex:d?"1 0 auto":"none",minWidth:d?"45%":"auto",textAlign:"center",marginBottom:d?4:0},children:i.label},i.id))})},M=({onNavigate:t})=>{const[o,a]=c.useState([]),[d,i]=c.useState(!0),[u,h]=c.useState("all"),[l,m]=c.useState(""),[E,y]=c.useState(window.innerWidth);c.useEffect(()=>{const r=()=>{y(window.innerWidth)};return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[]),c.useEffect(()=>{(async()=>{try{const s=C();s.success&&a(s.data)}catch(s){console.error("Error al cargar citas:",s)}finally{i(!1)}})()},[]);const w=(r,s)=>{try{k(r,s).success&&a(o.map(x=>x.id===r?{...x,status:s}:x))}catch(p){console.error("Error al actualizar estado de cita:",p)}},f=o.filter(r=>{const s=u==="all"||r.status===u,p=l===""||r.studentName.toLowerCase().includes(l.toLowerCase())||r.center.toLowerCase().includes(l.toLowerCase())||r.reason.toLowerCase().includes(l.toLowerCase());return s&&p}),g=f.reduce((r,s)=>(r[s.date]||(r[s.date]=[]),r[s.date].push(s),r),{}),b=Object.keys(g).sort(),j=()=>{t("dashboard")};return e.jsxs(S,{title:"Gestión de Citas",onBack:j,activeScreen:"appointments",onNavigate:t,children:[e.jsx(v,{}),e.jsxs("div",{style:{position:"relative",marginBottom:16},children:[e.jsx("input",{type:"text",value:l,onChange:r=>m(r.target.value),placeholder:"Buscar por NRE, centro, motivo...",style:{width:"100%",padding:"10px 16px 10px 40px",borderRadius:8,border:`1px solid ${n.lightGrey}`,fontSize:14}}),e.jsx("span",{style:{position:"absolute",left:12,top:"50%",transform:"translateY(-50%)",color:n.textMedium,fontSize:18},children:"🔍"}),l&&e.jsx("button",{onClick:()=>m(""),style:{position:"absolute",right:12,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:n.textMedium,fontSize:16,cursor:"pointer"},children:"✕"})]}),e.jsx(R,{activeFilter:u,onFilterChange:h}),d?e.jsx("div",{style:{textAlign:"center",padding:"30px 0",color:n.textMedium},children:"Cargando citas..."}):f.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"30px 0",color:n.textMedium,background:"white",borderRadius:12,marginTop:16},children:[e.jsx("div",{style:{fontSize:40,marginBottom:16},children:"📅"}),e.jsxs("p",{children:["No se encontraron citas ",u!=="all"&&`con estado "${u}"`]}),l&&e.jsxs("p",{children:['con el término de búsqueda "',l,'"']}),u!=="all"&&e.jsx("button",{onClick:()=>h("all"),style:{background:n.primary,color:"white",border:"none",borderRadius:20,padding:"8px 16px",marginTop:16,cursor:"pointer"},children:"Ver todas las citas"})]}):b.map(r=>e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("h2",{style:{margin:"0 0 12px 0",fontSize:16,color:n.textDark,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{background:n.primary,color:"white",width:24,height:24,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"center",fontSize:14},children:g[r].length}),r===new Date().toISOString().split("T")[0]?"Hoy":r]}),g[r].map(s=>e.jsx(z,{appointment:s,onStatusChange:w},s.id))]},r)),e.jsx("div",{style:{marginTop:24},children:e.jsxs("button",{onClick:()=>{},style:{width:"100%",padding:"12px",background:n.primary,border:"none",borderRadius:8,color:"white",fontSize:14,fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[e.jsx("span",{children:"➕"})," Programar nueva cita"]})})]})};export{M as default};
