import{u as D,r as l,j as e,C as _,D as ee,a as j,B as u,N as te,L as ne,A as L,b}from"./index-t3TyDbTL.js";const S=({icon:r,title:t,onClick:g,highlight:h})=>{const s=D();return e.jsxs("div",{onClick:g,style:{background:s.colors.cardBg,padding:s.spacing.md,borderRadius:s.borderRadius.lg,textAlign:"center",boxShadow:s.shadows.sm,cursor:"pointer",border:h?`2px solid ${s.colors.primary}`:"none",transition:s.transitions.default,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",":hover":{transform:"translateY(-2px)",boxShadow:s.shadows.md}},children:[e.jsx("div",{style:{fontSize:"1.8rem",marginBottom:8},children:r}),e.jsx("p",{style:{margin:0,fontSize:s.typography.fontSize.sm,fontWeight:h?s.typography.fontWeight.semibold:s.typography.fontWeight.medium,color:h?s.colors.primary:s.colors.textDark,textAlign:"center",width:"100%",lineHeight:1.3},children:t})]})},se=({time:r,appointment:t,isAvailable:g,onAssign:h})=>{const s=D(),x=window.innerWidth<480;return e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:x?6:8,background:s.colors.lightBg,borderRadius:8,padding:x?10:12,borderLeft:(t==null?void 0:t.priority)==="high"?`4px solid ${s.colors.error}`:g?`4px solid ${s.colors.success}`:"none"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("p",{style:{margin:0,fontSize:x?13:14,color:s.colors.textDark,fontWeight:s.typography.fontWeight.medium},children:[e.jsxs("span",{style:{color:g?s.colors.success:s.colors.textDark},children:["⏰ ",r]}),t&&` — NRE ${t.nre}`]}),t?e.jsx("span",{style:{color:s.colors.textMedium,fontSize:x?12:13},children:t.type}):e.jsx("span",{style:{color:s.colors.success,fontSize:x?12:13},children:"Disponible"})]}),g&&e.jsx(u,{onClick:()=>h(r),variant:"secondary",size:"small",icon:"+",children:x?"Añadir":"Asignar"})]})};function oe({onNavigate:r}){const t=D(),[g,h]=l.useState("home"),[s,x]=l.useState("available"),[c,z]=l.useState(null),[d,O]=l.useState(null),[N,R]=l.useState(!0),[H,v]=l.useState(!1),[W,C]=l.useState(null),[w,A]=l.useState(""),[T,F]=l.useState(window.innerWidth),i=T<768,o=T<480;l.useEffect(()=>{const n=()=>F(window.innerWidth);return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]);const f=new Date,k=f.getDay(),$=f.toLocaleDateString("es-ES",{weekday:"long"}),J=f.getDate(),P=f.toLocaleDateString("es-ES",{month:"long"}),G=`${$.charAt(0).toUpperCase()+$.slice(1)} ${J} ${P}`,E=[{center:"IES San Juan Bosco",dayOfWeek:1,startTime:"10:00",endTime:"11:00",location:"Dept. orientación",availableSlots:["10:00","10:15","10:30","10:45"],pendingAppointments:2,appointments:[{time:"10:00",nre:"123456",type:"Consulta general",priority:"normal"},{time:"10:30",nre:"234567",type:"Salud emocional",priority:"high"}]},{center:"IES Mediterráneo",dayOfWeek:3,startTime:"11:30",endTime:"12:30",location:"Sala de enfermería",availableSlots:["11:30","11:45","12:00","12:15"],pendingAppointments:1,appointments:[{time:"11:30",nre:"345678",type:"Consulta preventiva",priority:"normal"}]},{center:"IES Francisco Ros Giner",dayOfWeek:4,startTime:"09:30",endTime:"10:30",location:"Sala de reuniones",availableSlots:["09:30","09:45","10:00","10:15"],pendingAppointments:0,appointments:[]}];l.useEffect(()=>{R(!0),setTimeout(()=>{const n=E.find(a=>a.dayOfWeek===k);if(z(n||null),!n){let a=k,m=0,p=null;for(;m<7&&!p;)a=(a+1)%7,p=E.find(y=>y.dayOfWeek===a),m++;O(p)}R(!1)},1e3)},[k]);const U=()=>x({available:"busy",busy:"away",away:"available"}[s]),B={available:{color:t.colors.success,text:"Disponible"},busy:{color:t.colors.warning,text:"Ocupado"},away:{color:"#999",text:"Ausente"}}[s],V=n=>{var m,p;if(!n)return[];const a=((m=n.appointments)==null?void 0:m.map(y=>y.time))||[];return((p=n.availableSlots)==null?void 0:p.filter(y=>!a.includes(y)))||[]},Y=n=>{C(n),v(!0)},q=()=>{if(!w.trim()){alert("Por favor ingrese un NRE válido");return}const n={...c};n.appointments||(n.appointments=[]),n.appointments.push({time:W,nre:w,type:"Consulta general",priority:"normal"}),n.appointments.sort((a,m)=>a.time.localeCompare(m.time)),n.pendingAppointments=n.appointments.length,z(n),v(!1),A(""),C(null)},I=n=>{if(!n)return null;const a=V(n),m=n.availableSlots||[];return e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:i?6:10,marginTop:10},children:m.map((p,y)=>{var M;const K=(M=n.appointments)==null?void 0:M.find(Z=>Z.time===p),Q=a.includes(p);return e.jsx(se,{time:p,appointment:K,isAvailable:Q,onAssign:Y},y)})})},X=()=>g!=="home"?e.jsxs("div",{style:{textAlign:"center",marginTop:i?t.spacing.lg:t.spacing.xl,padding:i?t.spacing.md:t.spacing.lg,background:t.colors.lightBg,borderRadius:t.borderRadius.lg,minHeight:200},children:[e.jsxs("h2",{style:{color:t.colors.primary},children:["Sección: ",g]}),e.jsx("p",{style:{marginBottom:t.spacing.lg},children:"Esta sección está en desarrollo"}),e.jsx(u,{variant:"primary",onClick:()=>h("home"),children:"Volver al inicio"})]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:i?12:16},children:[e.jsx("div",{style:{width:i?40:50,height:i?40:50,borderRadius:t.borderRadius.round,backgroundColor:t.colors.primary,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:i?16:18,fontWeight:t.typography.fontWeight.bold},children:"R"}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:i?18:22,margin:0,color:t.colors.textDark},children:"¡Hola, Raquel!"}),e.jsx("p",{style:{margin:"4px 0 0 0",color:t.colors.textMedium,fontSize:i?13:14},children:G})]}),e.jsx("div",{onClick:U,style:{cursor:"pointer",marginLeft:"auto"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"4px 10px",background:t.colors.lightBg,borderRadius:16},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:5,background:B.color,marginRight:6}}),e.jsx("span",{style:{fontSize:i?11:12,color:t.colors.textMedium},children:B.text})]})})]})}),e.jsx(j,{style:{borderLeft:c?`4px solid ${t.colors.success}`:d?`4px solid ${t.colors.warning}`:"none"},children:N?e.jsxs("div",{style:{padding:"20px 0",textAlign:"center",color:t.colors.textMedium,display:"flex",flexDirection:"column",alignItems:"center",gap:t.spacing.md},children:[e.jsx(ne,{size:"medium",color:"primary"}),e.jsx("span",{children:"Cargando agenda..."})]}):c?e.jsxs(e.Fragment,{children:[e.jsxs(L,{type:"success",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:o?"wrap":"nowrap",gap:o?6:0},children:[e.jsx(b,{type:"success",children:"HOY"}),c.pendingAppointments>0&&e.jsxs(b,{type:"warning",style:{marginTop:o?4:0},children:[c.pendingAppointments," citas programadas"]})]}),e.jsxs("h3",{style:{fontSize:i?15:16,margin:`${t.spacing.sm} 0 ${t.spacing.xs} 0`,color:t.colors.textDark,fontWeight:t.typography.fontWeight.semibold},children:["Consulta Joven ",c.center]}),e.jsxs("p",{style:{fontSize:i?13:14,margin:0,color:t.colors.textMedium},children:[e.jsx("span",{style:{marginRight:6},children:"⏰"}),c.startTime," - ",c.endTime,e.jsx("span",{style:{margin:"0 4px 0 12px"},children:"📍"}),c.location]})]}),e.jsx("h3",{style:{fontSize:i?15:16,margin:`${t.spacing.md} 0 ${t.spacing.sm} 0`,color:t.colors.textDark},children:"Citas programadas y huecos disponibles – Hoy"}),I(c),e.jsx("div",{style:{marginTop:t.spacing.md,textAlign:"center"},children:e.jsx(u,{variant:"primary",onClick:()=>r("consultation-form"),icon:"📋",children:"Registro de Consulta"})})]}):d?e.jsxs(e.Fragment,{children:[e.jsxs(L,{type:"warning",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6,flexWrap:o?"wrap":"nowrap",gap:o?6:0},children:[e.jsx(b,{type:"warning",children:"PRÓXIMA CONSULTA"}),d.pendingAppointments>0&&e.jsxs(b,{type:"success",style:{marginTop:o?4:0},children:[d.pendingAppointments," citas programadas"]})]}),e.jsx("h3",{style:{fontSize:i?15:16,margin:`${t.spacing.sm} 0 ${t.spacing.xs} 0`,color:t.colors.textDark,fontWeight:t.typography.fontWeight.semibold},children:d.center}),e.jsxs("p",{style:{fontSize:i?13:14,margin:0,color:t.colors.textMedium},children:[e.jsx("span",{style:{marginRight:6},children:"📅"}),["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"][d.dayOfWeek],e.jsx("span",{style:{margin:"0 4px 0 12px"},children:"⏰"}),d.startTime," - ",d.endTime,e.jsx("span",{style:{margin:"0 4px 0 12px"},children:"📍"}),d.location]})]}),e.jsx("h3",{style:{fontSize:i?15:16,margin:`${t.spacing.md} 0 ${t.spacing.sm} 0`,color:t.colors.textDark},children:"Citas programadas y huecos disponibles"}),I(d),e.jsx("div",{style:{marginTop:t.spacing.md,textAlign:"center"},children:e.jsx(u,{variant:"primary",onClick:()=>r("consultation-form"),icon:"📋",children:"Registro de Consulta"})})]}):e.jsx("div",{style:{textAlign:"center",padding:"20px 0",color:t.colors.textMedium},children:"No hay consultas programadas próximamente"})}),e.jsxs(j,{children:[e.jsx("h2",{style:{fontSize:i?16:18,margin:`0 0 ${t.spacing.md} 0`,color:t.colors.textDark},children:"Acciones rápidas"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:`repeat(auto-fit, minmax(${o?"120px":"130px"}, 1fr))`,gap:i?8:12,marginBottom:i?8:12},children:[e.jsx(S,{icon:"📊",title:"Estadísticas",onClick:()=>r("statistics")}),e.jsx(S,{icon:"👥",title:"Interconsulta",onClick:()=>r("interconsultation")})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:`repeat(auto-fit, minmax(${o?"120px":"130px"}, 1fr))`,gap:i?8:12},children:[e.jsx(S,{icon:"⏰",title:"Gestionar disponibilidad",onClick:()=>r("availability")}),e.jsx(S,{icon:"🏫",title:"Mis centros",onClick:()=>r("centers")})]})]})]});return e.jsxs(_,{style:{padding:i&&o?t.spacing.sm:t.spacing.md,maxWidth:"800px"},children:[e.jsx(ee,{}),X(),H&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:100},children:e.jsxs(j,{style:{width:"90%",maxWidth:400,padding:o?t.spacing.md:t.spacing.lg},children:[e.jsxs("h3",{style:{margin:`0 0 ${t.spacing.md} 0`,color:t.colors.textDark,fontSize:o?16:18},children:["Asignar Cita - ",W]}),e.jsxs("div",{style:{marginBottom:t.spacing.md},children:[e.jsx("label",{style:{display:"block",marginBottom:t.spacing.sm,fontSize:t.typography.fontSize.sm,color:t.colors.textDark},children:"NRE del Estudiante"}),e.jsx("input",{type:"text",value:w,onChange:n=>A(n.target.value),placeholder:"Ingrese el NRE",style:{width:"100%",padding:`${t.spacing.sm} ${t.spacing.md}`,borderRadius:t.borderRadius.md,border:`1px solid ${t.colors.lightBg}`,fontSize:t.typography.fontSize.sm}})]}),e.jsxs("div",{style:{display:"flex",gap:t.spacing.sm,justifyContent:"flex-end",flexDirection:o?"column":"row"},children:[e.jsx(u,{variant:"text",onClick:()=>{v(!1),A(""),C(null)},style:{flex:o?"none":1},children:"Cancelar"}),e.jsx(u,{variant:"primary",onClick:q,style:{flex:o?"none":1},children:"Confirmar"})]})]})}),e.jsx(te,{active:"dashboard",onNavigate:r,userType:"professional"})]})}export{oe as default};
