import{h as ye,d as _,i as je,k as Se,s as k,f as re,c as oe,r as u,j as e}from"./index-BmE4jDWU.js";import{P as we}from"./ProfessionalLayout-BsT-BD-C.js";import{u as ke}from"./AuthContext-CedbsvhE.js";const Ce=async a=>{try{let s;if(a.id){const d=ye(_,"consultations",a.id);if(!(await je(d)).exists())throw new Error("La consulta no existe");await Se(d,{...a,updatedAt:k()}),s={success:!0,message:"Consulta actualizada correctamente",data:{...a,id:a.id}}}else{const d=await re(oe(_,"consultations"),{...a,createdAt:k(),updatedAt:k()});s={success:!0,message:"Consulta registrada correctamente",data:{...a,id:d.id}}}return await re(oe(_,"audit"),{action:a.id?"update":"create",resource:"consultation",resourceId:s.data.id,userId:a.professionalId,userType:"professional",timestamp:k(),metadata:{studentId:a.studentId}}),s}catch(s){return console.error("Error al guardar la consulta:",s),{success:!1,message:"Error al guardar la consulta",error:s.message}}},r={primary:"#00B7D8",textDark:"#2C3E50",textMedium:"#4A6572",lightBg:"#F7FAFC",danger:"#E74C3C",lightGrey:"#ECEFF1"},ze=()=>e.jsx("div",{style:{position:"fixed",top:10,right:10,background:"#00B7D8",color:"#fff",padding:"4px 12px",borderRadius:20,fontSize:"0.75rem",fontWeight:600,letterSpacing:.5,zIndex:1e3},children:"DEMO"}),f=({type:a,children:s,onClose:d})=>{const p=a==="warning"?"rgba(255, 152, 0, 0.1)":a==="danger"?"rgba(231, 76, 60, 0.1)":a==="success"?"rgba(76, 175, 80, 0.1)":"rgba(0, 183, 216, 0.1)",i=a==="warning"?"âš ï¸":a==="danger"?"ðŸš¨":a==="success"?"âœ…":"â„¹ï¸";return e.jsxs("div",{style:{background:p,padding:"12px 16px",borderRadius:8,marginBottom:16,display:"flex",alignItems:"flex-start",gap:12,position:"relative"},children:[e.jsx("div",{style:{fontSize:18},children:i}),e.jsx("div",{style:{color:r.textDark,fontSize:14,lineHeight:1.5,flex:1},children:s}),d&&e.jsx("button",{onClick:d,style:{background:"none",border:"none",fontSize:18,cursor:"pointer",padding:0,color:r.textMedium,position:"absolute",top:8,right:8},children:"âœ•"})]})},j=({options:a,selected:s,onChange:d,title:p})=>e.jsxs("div",{style:{marginBottom:16},children:[p&&e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:[p," ",e.jsx("span",{style:{color:r.danger},children:"*"})]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:a.map(i=>e.jsxs("div",{onClick:()=>d(i.value),style:{background:s.includes(i.value)?"rgba(0, 183, 216, 0.1)":r.lightBg,border:s.includes(i.value)?`2px solid ${r.primary}`:`2px solid ${r.lightGrey}`,borderRadius:8,padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:8,transition:"all 0.2s ease"},children:[e.jsx("div",{style:{width:18,height:18,borderRadius:4,border:`2px solid ${s.includes(i.value)?r.primary:r.lightGrey}`,background:s.includes(i.value)?r.primary:"transparent",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:12},children:s.includes(i.value)&&"âœ“"}),e.jsx("span",{style:{fontSize:14,color:s.includes(i.value)?r.primary:r.textDark,fontWeight:s.includes(i.value)?500:"normal"},children:i.label})]},i.value))})]}),Be=({onNavigate:a,initialData:s=null,demoMode:d=!1})=>{const{user:p,userData:i}=ke(),[C,P]=u.useState((s==null?void 0:s.nre)||""),[z,H]=u.useState((s==null?void 0:s.date)||new Date().toISOString().split("T")[0]),[R,L]=u.useState((s==null?void 0:s.startTime)||""),[q,M]=u.useState((s==null?void 0:s.endTime)||""),[h,O]=u.useState((s==null?void 0:s.consultationType)||"presencial"),[T,N]=u.useState((s==null?void 0:s.course)||""),[B,V]=u.useState((s==null?void 0:s.age)||""),[E,J]=u.useState((s==null?void 0:s.gender)||""),[g,K]=u.useState((s==null?void 0:s.consultationReasons)||[]),[b,I]=u.useState((s==null?void 0:s.mentalHealthOptions)||[]),[v,$]=u.useState((s==null?void 0:s.abuseOptions)||[]),[y,A]=u.useState((s==null?void 0:s.addictionOptions)||[]),[G,Q]=u.useState((s==null?void 0:s.otherReason)||""),[m,U]=u.useState((s==null?void 0:s.interventionTypes)||[]),[F,X]=u.useState((s==null?void 0:s.referralDetails)||""),[Y,Z]=u.useState((s==null?void 0:s.notes)||""),[le,S]=u.useState(!1),[l,x]=u.useState({}),[D,W]=u.useState(""),[n,ee]=u.useState(!1);u.useEffect(()=>{var o;(o=s==null?void 0:s.interventionTypes)!=null&&o.includes("derivacion")&&S(!0)},[s]);const te=[{value:"",label:"Seleccionar"},{value:"hombre",label:"Hombre"},{value:"mujer",label:"Mujer"},{value:"otro",label:"Otro"}],ne=[{value:"",label:"Seleccionar"},{value:"1eso",label:"1Âº ESO"},{value:"2eso",label:"2Âº ESO"},{value:"3eso",label:"3Âº ESO"},{value:"4eso",label:"4Âº ESO"},{value:"1bach",label:"1Âº Bachillerato"},{value:"2bach",label:"2Âº Bachillerato"},{value:"1fpb",label:"1Âº FP BÃ¡sica"},{value:"2fpb",label:"2Âº FP BÃ¡sica"},{value:"1fpgm",label:"1Âº FP Grado Medio"},{value:"2fpgm",label:"2Âº FP Grado Medio"},{value:"1fpgs",label:"1Âº FP Grado Superior"},{value:"2fpgs",label:"2Âº FP Grado Superior"}],ae=[{value:"sexualidad",label:"Sexualidad"},{value:"alimentacion",label:"AlimentaciÃ³n"},{value:"ejercicio_fisico",label:"Ejercicio fÃ­sico"},{value:"salud_mental",label:"Salud mental"},{value:"adicciones",label:"Adicciones"},{value:"acoso",label:"Acoso"},{value:"relaciones",label:"Relaciones"},{value:"otro",label:"Otro (especificar)"}],ie=[{value:"ansiedad",label:"Ansiedad"},{value:"depresion",label:"DepresiÃ³n"},{value:"autolesiones",label:"Autolesiones"},{value:"ideacion_suicida",label:"IdeaciÃ³n suicida"},{value:"trastorno_alimentario",label:"Trastorno alimentario"},{value:"insomnio",label:"Problemas de sueÃ±o"},{value:"otro_salud_mental",label:"Otro"}],de=[{value:"acoso_escolar",label:"Escolar/Bullying"},{value:"acoso_sexual",label:"Sexual"},{value:"acoso_digital",label:"Digital/Ciberbullying"},{value:"acoso_familiar",label:"Familiar"},{value:"otro_acoso",label:"Otro tipo"}],ce=[{value:"alcohol",label:"Alcohol"},{value:"tabaco",label:"Tabaco"},{value:"cannabis",label:"Cannabis"},{value:"otras_drogas",label:"Otras drogas"},{value:"pantallas",label:"Pantallas/TecnologÃ­a"},{value:"juegos_apuestas",label:"Juegos/Apuestas"},{value:"otra_adiccion",label:"Otra"}],ue=[{value:"consejo",label:"Consejo"},{value:"derivacion",label:"DerivaciÃ³n"},{value:"seguimiento",label:"Seguimiento"},{value:"otro",label:"Otro"}],ge=o=>{let t;g.includes(o)?(t=g.filter(c=>c!==o),o==="salud_mental"&&I([]),o==="acoso"&&$([]),o==="adicciones"&&A([])):t=[...g,o],K(t),t.length>0&&x({...l,consultationReasons:null})},pe=o=>{let t;b.includes(o)?t=b.filter(c=>c!==o):t=[...b,o],I(t)},xe=o=>{let t;v.includes(o)?t=v.filter(c=>c!==o):t=[...v,o],$(t)},he=o=>{let t;y.includes(o)?t=y.filter(c=>c!==o):t=[...y,o],A(t)},me=o=>{let t;m.includes(o)?(t=m.filter(c=>c!==o),o==="derivacion"&&S(!1)):(t=[...m,o],o==="derivacion"&&S(!0)),U(t),t.length>0&&x({...l,interventionTypes:null})},be=()=>{const o={};return C.trim()||(o.nre="El NRE es obligatorio"),z||(o.date="La fecha es obligatoria"),R||(o.startTime="La hora de inicio es obligatoria"),B||(o.age="La edad es obligatoria"),T||(o.course="El curso es obligatorio"),E||(o.gender="El sexo es obligatorio"),g.length===0&&(o.consultationReasons="Debe seleccionar al menos un motivo de consulta"),m.length===0&&(o.interventionTypes="Debe seleccionar al menos un tipo de intervenciÃ³n"),g.includes("otro")&&!G.trim()&&(o.otherReason="Debe especificar el otro motivo de consulta"),m.includes("derivacion")&&!F.trim()&&(o.referralDetails="Debe especificar los detalles de la derivaciÃ³n"),x(o),Object.keys(o).length===0},fe=async o=>{if(o.preventDefault(),!be()){window.scrollTo(0,0);return}ee(!0),x({});try{const t={nre:C.trim(),date:z,startTime:R,endTime:q,consultationType:h,age:parseInt(B),course:T,gender:E,consultationReasons:g,mentalHealthOptions:g.includes("salud_mental")?b:[],abuseOptions:g.includes("acoso")?v:[],addictionOptions:g.includes("adicciones")?y:[],otherReason:g.includes("otro")?G.trim():"",interventionTypes:m,referralDetails:m.includes("derivacion")?F.trim():"",notes:Y.trim(),professionalId:d?"demo-professional":p==null?void 0:p.uid,professionalName:d?"Demo Professional":i?`${i.nombre} ${i.apellidos}`:"Profesional",professionalEmail:d?"demo@carm.es":(i==null?void 0:i.email)||(p==null?void 0:p.email),centroSalud:d?"Centro Demo":i==null?void 0:i.centroSalud,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};if(d)console.log("Datos de consulta (modo demo):",t),await new Promise(c=>setTimeout(c,1e3)),W(s?"Consulta actualizada correctamente (modo demo)":"Consulta registrada correctamente (modo demo)"),s||se(),window.scrollTo(0,0),s&&setTimeout(()=>{w()},2e3);else{let c;s&&s.id&&(t.id=s.id),c=await Ce(t),W(s&&s.id?"Consulta actualizada correctamente":"Consulta registrada correctamente"),console.log("Consulta guardada en Firebase:",c),s||se(),window.scrollTo(0,0),s&&setTimeout(()=>{w()},2e3)}}catch(t){console.error("Error al guardar la consulta:",t);let c="Error al guardar la consulta. IntÃ©ntalo de nuevo.";if(t.code)switch(t.code){case"permission-denied":c="No tienes permisos para realizar esta acciÃ³n.";break;case"network-request-failed":c="Error de conexiÃ³n. Verifica tu internet.";break;case"unauthenticated":c="Debes iniciar sesiÃ³n para guardar consultas.";break;default:c=t.message||c}x({general:c}),window.scrollTo(0,0)}finally{ee(!1)}},se=()=>{P(""),H(new Date().toISOString().split("T")[0]),L(""),M(""),O("presencial"),N(""),V(""),J(""),K([]),I([]),$([]),A([]),Q(""),U([]),X(""),Z(""),S(!1),x({})},w=()=>{a&&a("dashboard")},ve=()=>e.jsxs("div",{style:{marginBottom:16},children:[l.general&&e.jsx(f,{type:"danger",onClose:()=>x({...l,general:null}),children:l.general}),D&&e.jsx(f,{type:"success",onClose:()=>W(""),children:D}),d&&e.jsxs(f,{type:"warning",children:[e.jsx("strong",{children:"Modo Demo:"})," Los datos no se guardarÃ¡n permanentemente. En la versiÃ³n real, se almacenarÃ­an en Firebase Firestore."]}),le&&e.jsxs(f,{type:"warning",children:[e.jsx("strong",{children:"Recordatorio:"})," Has seleccionado derivaciÃ³n como tipo de intervenciÃ³n. Por favor, especifica los detalles de la derivaciÃ³n en el campo correspondiente."]}),!d&&!p&&e.jsxs(f,{type:"danger",children:[e.jsx("strong",{children:"AutenticaciÃ³n requerida:"})," Debes iniciar sesiÃ³n para guardar consultas."]})]});return e.jsxs(we,{title:s?"Editar Consulta":"Registro de Consulta",onBack:w,activeScreen:"consultation-form",onNavigate:a,children:[d&&e.jsx(ze,{}),ve(),e.jsxs("form",{onSubmit:fe,style:{marginTop:16},children:[e.jsxs("div",{style:{background:"white",padding:16,borderRadius:12,marginBottom:16,boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[e.jsx("h2",{style:{fontSize:18,margin:"0 0 16px 0",color:r.textDark},children:"Datos bÃ¡sicos"}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:["NRE ",e.jsx("span",{style:{color:r.danger},children:"*"})]}),e.jsx("input",{type:"text",value:C,onChange:o=>{P(o.target.value),o.target.value.trim()&&x({...l,nre:null})},placeholder:"NÃºmero de Registro del Estudiante",disabled:n,style:{width:"100%",padding:"10px 12px",borderRadius:8,border:l.nre?`1px solid ${r.danger}`:`1px solid ${r.lightGrey}`,fontSize:14}}),l.nre&&e.jsx("p",{style:{color:r.danger,margin:"4px 0 0 0",fontSize:12},children:l.nre})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:16,marginBottom:16},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:["Fecha ",e.jsx("span",{style:{color:r.danger},children:"*"})]}),e.jsx("input",{type:"date",value:z,onChange:o=>{H(o.target.value),o.target.value&&x({...l,date:null})},disabled:n,style:{width:"100%",padding:"10px 12px",borderRadius:8,border:l.date?`1px solid ${r.danger}`:`1px solid ${r.lightGrey}`,fontSize:14}}),l.date&&e.jsx("p",{style:{color:r.danger,margin:"4px 0 0 0",fontSize:12},children:l.date})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:["Hora inicio ",e.jsx("span",{style:{color:r.danger},children:"*"})]}),e.jsx("input",{type:"time",value:R,onChange:o=>{L(o.target.value),o.target.value&&x({...l,startTime:null})},disabled:n,style:{width:"100%",padding:"10px 12px",borderRadius:8,border:l.startTime?`1px solid ${r.danger}`:`1px solid ${r.lightGrey}`,fontSize:14}}),l.startTime&&e.jsx("p",{style:{color:r.danger,margin:"4px 0 0 0",fontSize:12},children:l.startTime})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:"Hora fin"}),e.jsx("input",{type:"time",value:q,onChange:o=>M(o.target.value),disabled:n,style:{width:"100%",padding:"10px 12px",borderRadius:8,border:`1px solid ${r.lightGrey}`,fontSize:14}})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:"Tipo de consulta"}),e.jsxs("div",{style:{display:"flex",gap:16},children:[e.jsxs("div",{onClick:()=>!n&&O("presencial"),style:{flex:1,background:h==="presencial"?"rgba(0, 183, 216, 0.1)":r.lightBg,border:h==="presencial"?`2px solid ${r.primary}`:`2px solid ${r.lightGrey}`,borderRadius:8,padding:"10px 12px",cursor:n?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8,transition:"all 0.2s ease",opacity:n?.6:1},children:[e.jsx("div",{style:{width:18,height:18,borderRadius:"50%",border:`2px solid ${h==="presencial"?r.primary:r.lightGrey}`,display:"flex",alignItems:"center",justifyContent:"center"},children:h==="presencial"&&e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:r.primary}})}),e.jsx("span",{style:{fontSize:14,color:h==="presencial"?r.primary:r.textDark,fontWeight:h==="presencial"?500:"normal"},children:"Presencial"})]}),e.jsxs("div",{onClick:()=>!n&&O("virtual"),style:{flex:1,background:h==="virtual"?"rgba(0, 183, 216, 0.1)":r.lightBg,border:h==="virtual"?`2px solid ${r.primary}`:`2px solid ${r.lightGrey}`,borderRadius:8,padding:"10px 12px",cursor:n?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8,transition:"all 0.2s ease",opacity:n?.6:1},children:[e.jsx("div",{style:{width:18,height:18,borderRadius:"50%",border:`2px solid ${h==="virtual"?r.primary:r.lightGrey}`,display:"flex",alignItems:"center",justifyContent:"center"},children:h==="virtual"&&e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:r.primary}})}),e.jsx("span",{style:{fontSize:14,color:h==="virtual"?r.primary:r.textDark,fontWeight:h==="virtual"?500:"normal"},children:"Virtual"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:16},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:["Edad ",e.jsx("span",{style:{color:r.danger},children:"*"})]}),e.jsx("input",{type:"number",value:B,onChange:o=>{V(o.target.value),o.target.value&&x({...l,age:null})},min:"10",max:"25",placeholder:"Edad",disabled:n,style:{width:"100%",padding:"10px 12px",borderRadius:8,border:l.age?`1px solid ${r.danger}`:`1px solid ${r.lightGrey}`,fontSize:14}}),l.age&&e.jsx("p",{style:{color:r.danger,margin:"4px 0 0 0",fontSize:12},children:l.age})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:["Curso ",e.jsx("span",{style:{color:r.danger},children:"*"})]}),e.jsx("select",{value:T,onChange:o=>{N(o.target.value),o.target.value&&x({...l,course:null})},disabled:n,style:{width:"100%",padding:"10px 12px",borderRadius:8,border:l.course?`1px solid ${r.danger}`:`1px solid ${r.lightGrey}`,fontSize:14,appearance:"none",backgroundImage:`url("data:image/svg+xml;utf8,<svg fill='black' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/><path d='M0 0h24v24H0z' fill='none'/></svg>")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 10px center",backgroundColor:"white"},children:ne.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))}),l.course&&e.jsx("p",{style:{color:r.danger,margin:"4px 0 0 0",fontSize:12},children:l.course})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:["Sexo ",e.jsx("span",{style:{color:r.danger},children:"*"})]}),e.jsx("select",{value:E,onChange:o=>{J(o.target.value),o.target.value&&x({...l,gender:null})},disabled:n,style:{width:"100%",padding:"10px 12px",borderRadius:8,border:l.gender?`1px solid ${r.danger}`:`1px solid ${r.lightGrey}`,fontSize:14,appearance:"none",backgroundImage:`url("data:image/svg+xml;utf8,<svg fill='black' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/><path d='M0 0h24v24H0z' fill='none'/></svg>")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 10px center",backgroundColor:"white"},children:te.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))}),l.gender&&e.jsx("p",{style:{color:r.danger,margin:"4px 0 0 0",fontSize:12},children:l.gender})]})]})]}),e.jsxs("div",{style:{background:"white",padding:16,borderRadius:12,marginBottom:16,boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[e.jsx("h2",{style:{fontSize:18,margin:"0 0 16px 0",color:r.textDark},children:"Motivo de consulta"}),e.jsx(j,{options:ae,selected:g,onChange:ge,title:"Seleccione los motivos de consulta"}),l.consultationReasons&&e.jsx("p",{style:{color:r.danger,margin:"4px 0 16px 0",fontSize:12},children:l.consultationReasons}),g.includes("salud_mental")&&e.jsx("div",{style:{marginBottom:16},children:e.jsx(j,{options:ie,selected:b,onChange:pe,title:"Especifique problemas de salud mental"})}),g.includes("acoso")&&e.jsx("div",{style:{marginBottom:16},children:e.jsx(j,{options:de,selected:v,onChange:xe,title:"Especifique tipo de acoso"})}),g.includes("adicciones")&&e.jsx("div",{style:{marginBottom:16},children:e.jsx(j,{options:ce,selected:y,onChange:he,title:"Especifique tipo de adicciÃ³n"})}),g.includes("otro")&&e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:["Especifique otro motivo ",e.jsx("span",{style:{color:r.danger},children:"*"})]}),e.jsx("input",{type:"text",value:G,onChange:o=>{Q(o.target.value),o.target.value.trim()&&x({...l,otherReason:null})},placeholder:"Describa el motivo de consulta",disabled:n,style:{width:"100%",padding:"10px 12px",borderRadius:8,border:l.otherReason?`1px solid ${r.danger}`:`1px solid ${r.lightGrey}`,fontSize:14}}),l.otherReason&&e.jsx("p",{style:{color:r.danger,margin:"4px 0 0 0",fontSize:12},children:l.otherReason})]}),(g.includes("acoso")||g.includes("salud_mental")&&(b.includes("autolesiones")||b.includes("ideacion_suicida"))||g.includes("adicciones"))&&e.jsxs(f,{type:"danger",children:[e.jsx("strong",{children:"Â¡Importante!"})," Recuerda que este tipo de consulta debe notificarse siempre al centro educativo para poder activar los protocolos apropiados."]})]}),e.jsxs("div",{style:{background:"white",padding:16,borderRadius:12,marginBottom:16,boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[e.jsx("h2",{style:{fontSize:18,margin:"0 0 16px 0",color:r.textDark},children:"IntervenciÃ³n"}),e.jsx(j,{options:ue,selected:m,onChange:me,title:"Tipo de intervenciÃ³n realizada"}),l.interventionTypes&&e.jsx("p",{style:{color:r.danger,margin:"4px 0 16px 0",fontSize:12},children:l.interventionTypes}),m.includes("derivacion")&&e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:["Detalles de la derivaciÃ³n ",e.jsx("span",{style:{color:r.danger},children:"*"})]}),e.jsx("textarea",{value:F,onChange:o=>{X(o.target.value),o.target.value.trim()&&x({...l,referralDetails:null})},placeholder:"Especifique a dÃ³nde se deriva y motivo",rows:3,disabled:n,style:{width:"100%",padding:"10px 12px",borderRadius:8,border:l.referralDetails?`1px solid ${r.danger}`:`1px solid ${r.lightGrey}`,fontSize:14,resize:"vertical"}}),l.referralDetails&&e.jsx("p",{style:{color:r.danger,margin:"4px 0 0 0",fontSize:12},children:l.referralDetails})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:"Notas adicionales"}),e.jsx("textarea",{value:Y,onChange:o=>Z(o.target.value),placeholder:"Observaciones, recomendaciones, etc.",rows:4,disabled:n,style:{width:"100%",padding:"10px 12px",borderRadius:8,border:`1px solid ${r.lightGrey}`,fontSize:14,resize:"vertical"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:16,marginTop:24},children:[e.jsx("button",{type:"button",onClick:w,disabled:n,style:{flex:1,padding:"12px",background:"white",border:`1px solid ${r.lightGrey}`,borderRadius:8,color:r.textDark,fontSize:14,fontWeight:500,cursor:n?"not-allowed":"pointer",opacity:n?.6:1},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:n||!d&&!p,style:{flex:1,padding:"12px",background:n||!d&&!p?r.lightGrey:r.primary,border:"none",borderRadius:8,color:"white",fontSize:14,fontWeight:500,cursor:n||!d&&!p?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[n&&e.jsx("div",{style:{width:16,height:16,border:"2px solid rgba(255,255,255,0.3)",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),n?s?"Actualizando...":"Guardando...":s?"Actualizar consulta":"Guardar consulta"]})]})]}),e.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})};export{Be as default};
