import{r as n,j as e}from"./index-t3TyDbTL.js";import{P as ue}from"./ProfessionalLayout-DkntsXsu.js";/* empty css                              */const ge=d=>{try{return console.log("Guardando consulta:",d),{success:!0,message:d.id?"Consulta actualizada correctamente":"Consulta registrada correctamente",data:{...d,id:d.id||Math.floor(Math.random()*1e4)}}}catch(l){return console.error("Error al guardar la consulta:",l),{success:!1,message:"Error al guardar la consulta",error:l.message}}},r={primary:"#00B7D8",textDark:"#2C3E50",textMedium:"#4A6572",lightBg:"#F7FAFC",danger:"#E74C3C",lightGrey:"#ECEFF1"},pe=()=>e.jsx("div",{style:{position:"fixed",top:10,right:10,background:"#00B7D8",color:"#fff",padding:"4px 12px",borderRadius:20,fontSize:"0.75rem",fontWeight:600,letterSpacing:.5,zIndex:1e3},children:"DEMO"}),y=({type:d,children:l,onClose:x})=>{const h=d==="warning"?"rgba(255, 152, 0, 0.1)":d==="danger"?"rgba(231, 76, 60, 0.1)":"rgba(0, 183, 216, 0.1)",i=d==="warning"?"⚠️":d==="danger"?"🚨":"ℹ️";return e.jsxs("div",{style:{background:h,padding:"12px 16px",borderRadius:8,marginBottom:16,display:"flex",alignItems:"flex-start",gap:12,position:"relative"},children:[e.jsx("div",{style:{fontSize:18},children:i}),e.jsx("div",{style:{color:r.textDark,fontSize:14,lineHeight:1.5,flex:1},children:l}),x&&e.jsx("button",{onClick:x,style:{background:"none",border:"none",fontSize:18,cursor:"pointer",padding:0,color:r.textMedium,position:"absolute",top:8,right:8},children:"✕"})]})},f=({options:d,selected:l,onChange:x,title:h})=>e.jsxs("div",{style:{marginBottom:16},children:[h&&e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:[h," ",e.jsx("span",{style:{color:r.danger},children:"*"})]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:d.map(i=>e.jsxs("div",{onClick:()=>x(i.value),style:{background:l.includes(i.value)?"rgba(0, 183, 216, 0.1)":r.lightBg,border:l.includes(i.value)?`2px solid ${r.primary}`:`2px solid ${r.lightGrey}`,borderRadius:8,padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:8,transition:"all 0.2s ease"},children:[e.jsx("div",{style:{width:18,height:18,borderRadius:4,border:`2px solid ${l.includes(i.value)?r.primary:r.lightGrey}`,background:l.includes(i.value)?r.primary:"transparent",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:12},children:l.includes(i.value)&&"✓"}),e.jsx("span",{style:{fontSize:14,color:l.includes(i.value)?r.primary:r.textDark,fontWeight:l.includes(i.value)?500:"normal"},children:i.label})]},i.value))})]}),me=({onNavigate:d,initialData:l=null})=>{const[x,h]=n.useState((l==null?void 0:l.nre)||""),[i,G]=n.useState((l==null?void 0:l.date)||new Date().toISOString().split("T")[0]),[j,A]=n.useState((l==null?void 0:l.startTime)||""),[I,W]=n.useState((l==null?void 0:l.endTime)||""),[g,S]=n.useState((l==null?void 0:l.consultationType)||"presencial"),[k,_]=n.useState((l==null?void 0:l.course)||""),[w,F]=n.useState((l==null?void 0:l.age)||""),[C,M]=n.useState((l==null?void 0:l.gender)||""),[a,P]=n.useState((l==null?void 0:l.consultationReasons)||[]),[b,R]=n.useState((l==null?void 0:l.mentalHealthOptions)||[]),[m,z]=n.useState((l==null?void 0:l.abuseOptions)||[]),[v,B]=n.useState((l==null?void 0:l.addictionOptions)||[]),[O,H]=n.useState((l==null?void 0:l.otherReason)||""),[p,q]=n.useState((l==null?void 0:l.interventionTypes)||[]),[E,L]=n.useState((l==null?void 0:l.referralDetails)||""),[N,J]=n.useState((l==null?void 0:l.notes)||""),[Q,T]=n.useState(!1),[s,c]=n.useState({}),[V,K]=n.useState(""),U=[{value:"",label:"Seleccionar"},{value:"hombre",label:"Hombre"},{value:"mujer",label:"Mujer"},{value:"otro",label:"Otro"}],X=[{value:"",label:"Seleccionar"},{value:"1eso",label:"1º ESO"},{value:"2eso",label:"2º ESO"},{value:"3eso",label:"3º ESO"},{value:"4eso",label:"4º ESO"},{value:"1bach",label:"1º Bachillerato"},{value:"2bach",label:"2º Bachillerato"},{value:"1fpb",label:"1º FP Básica"},{value:"2fpb",label:"2º FP Básica"},{value:"1fpgm",label:"1º FP Grado Medio"},{value:"2fpgm",label:"2º FP Grado Medio"},{value:"1fpgs",label:"1º FP Grado Superior"},{value:"2fpgs",label:"2º FP Grado Superior"}],Y=[{value:"sexualidad",label:"Sexualidad"},{value:"alimentacion",label:"Alimentación"},{value:"ejercicio_fisico",label:"Ejercicio físico"},{value:"salud_mental",label:"Salud mental"},{value:"adicciones",label:"Adicciones"},{value:"acoso",label:"Acoso"},{value:"relaciones",label:"Relaciones"},{value:"otro",label:"Otro (especificar)"}],Z=[{value:"ansiedad",label:"Ansiedad"},{value:"depresion",label:"Depresión"},{value:"autolesiones",label:"Autolesiones"},{value:"ideacion_suicida",label:"Ideación suicida"},{value:"trastorno_alimentario",label:"Trastorno alimentario"},{value:"insomnio",label:"Problemas de sueño"},{value:"otro_salud_mental",label:"Otro"}],D=[{value:"acoso_escolar",label:"Escolar/Bullying"},{value:"acoso_sexual",label:"Sexual"},{value:"acoso_digital",label:"Digital/Ciberbullying"},{value:"acoso_familiar",label:"Familiar"},{value:"otro_acoso",label:"Otro tipo"}],ee=[{value:"alcohol",label:"Alcohol"},{value:"tabaco",label:"Tabaco"},{value:"cannabis",label:"Cannabis"},{value:"otras_drogas",label:"Otras drogas"},{value:"pantallas",label:"Pantallas/Tecnología"},{value:"juegos_apuestas",label:"Juegos/Apuestas"},{value:"otra_adiccion",label:"Otra"}],re=[{value:"consejo",label:"Consejo"},{value:"derivacion",label:"Derivación"},{value:"seguimiento",label:"Seguimiento"},{value:"otro",label:"Otro"}],oe=o=>{let t;a.includes(o)?(t=a.filter(u=>u!==o),o==="salud_mental"&&R([]),o==="acoso"&&z([]),o==="adicciones"&&B([])):t=[...a,o],P(t),t.length>0&&c({...s,consultationReasons:null})},le=o=>{let t;b.includes(o)?t=b.filter(u=>u!==o):t=[...b,o],R(t)},se=o=>{let t;m.includes(o)?t=m.filter(u=>u!==o):t=[...m,o],z(t)},te=o=>{let t;v.includes(o)?t=v.filter(u=>u!==o):t=[...v,o],B(t)},ne=o=>{let t;p.includes(o)?(t=p.filter(u=>u!==o),o==="derivacion"&&T(!1)):(t=[...p,o],o==="derivacion"&&T(!0)),q(t),t.length>0&&c({...s,interventionTypes:null})},ae=()=>{const o={};return x.trim()||(o.nre="El NRE es obligatorio"),i||(o.date="La fecha es obligatoria"),j||(o.startTime="La hora de inicio es obligatoria"),w||(o.age="La edad es obligatoria"),k||(o.course="El curso es obligatorio"),C||(o.gender="El sexo es obligatorio"),a.length===0&&(o.consultationReasons="Debe seleccionar al menos un motivo de consulta"),p.length===0&&(o.interventionTypes="Debe seleccionar al menos un tipo de intervención"),a.includes("otro")&&!O.trim()&&(o.otherReason="Debe especificar el otro motivo de consulta"),p.includes("derivacion")&&!E.trim()&&(o.referralDetails="Debe especificar los detalles de la derivación"),c(o),Object.keys(o).length===0},ie=o=>{if(o.preventDefault(),!ae()){window.scrollTo(0,0);return}const t={id:l==null?void 0:l.id,nre:x,date:i,startTime:j,endTime:I,consultationType:g,age:parseInt(w),course:k,gender:C,consultationReasons:a,mentalHealthOptions:a.includes("salud_mental")?b:[],abuseOptions:a.includes("acoso")?m:[],addictionOptions:a.includes("adicciones")?v:[],otherReason:a.includes("otro")?O:"",interventionTypes:p,referralDetails:p.includes("derivacion")?E:"",notes:N};try{const u=ge(t);u.success?(K(u.message),l||de(),window.scrollTo(0,0),l&&setTimeout(()=>{$()},2e3)):c({...s,general:"Error al guardar la consulta"})}catch(u){console.error("Error al guardar la consulta:",u),c({...s,general:"Error al guardar la consulta"})}},de=()=>{h(""),G(new Date().toISOString().split("T")[0]),A(""),W(""),S("presencial"),_(""),F(""),M(""),P([]),R([]),z([]),B([]),H(""),q([]),L(""),J(""),T(!1)},$=()=>{d?d("dashboard"):onBack&&onBack()},ce=()=>e.jsxs("div",{style:{marginBottom:16},children:[s.general&&e.jsx(y,{type:"danger",onClose:()=>c({...s,general:null}),children:s.general}),V&&e.jsx(y,{type:"accent",onClose:()=>K(""),children:V}),Q&&e.jsxs(y,{type:"warning",children:[e.jsx("strong",{children:"Recordatorio:"})," Has seleccionado derivación como tipo de intervención. Por favor, especifica los detalles de la derivación en el campo correspondiente."]})]});return e.jsxs(ue,{title:l?"Editar Consulta":"Registro de Consulta",onBack:$,activeScreen:"consultation-form",onNavigate:d,children:[e.jsx(pe,{}),ce(),e.jsxs("form",{onSubmit:ie,style:{marginTop:16},children:[e.jsxs("div",{style:{background:"white",padding:16,borderRadius:12,marginBottom:16,boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[e.jsx("h2",{style:{fontSize:18,margin:"0 0 16px 0",color:r.textDark},children:"Datos básicos"}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:["NRE ",e.jsx("span",{style:{color:r.danger},children:"*"})]}),e.jsx("input",{type:"text",value:x,onChange:o=>{h(o.target.value),o.target.value.trim()&&c({...s,nre:null})},placeholder:"Número de Registro del Estudiante",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:s.nre?`1px solid ${r.danger}`:`1px solid ${r.lightGrey}`,fontSize:14}}),s.nre&&e.jsx("p",{style:{color:r.danger,margin:"4px 0 0 0",fontSize:12},children:s.nre})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:16,marginBottom:16},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:["Fecha ",e.jsx("span",{style:{color:r.danger},children:"*"})]}),e.jsx("input",{type:"date",value:i,onChange:o=>{G(o.target.value),o.target.value&&c({...s,date:null})},style:{width:"100%",padding:"10px 12px",borderRadius:8,border:s.date?`1px solid ${r.danger}`:`1px solid ${r.lightGrey}`,fontSize:14}}),s.date&&e.jsx("p",{style:{color:r.danger,margin:"4px 0 0 0",fontSize:12},children:s.date})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:["Hora inicio ",e.jsx("span",{style:{color:r.danger},children:"*"})]}),e.jsx("input",{type:"time",value:j,onChange:o=>{A(o.target.value),o.target.value&&c({...s,startTime:null})},style:{width:"100%",padding:"10px 12px",borderRadius:8,border:s.startTime?`1px solid ${r.danger}`:`1px solid ${r.lightGrey}`,fontSize:14}}),s.startTime&&e.jsx("p",{style:{color:r.danger,margin:"4px 0 0 0",fontSize:12},children:s.startTime})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:"Hora fin"}),e.jsx("input",{type:"time",value:I,onChange:o=>W(o.target.value),style:{width:"100%",padding:"10px 12px",borderRadius:8,border:`1px solid ${r.lightGrey}`,fontSize:14}})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:"Tipo de consulta"}),e.jsxs("div",{style:{display:"flex",gap:16},children:[e.jsxs("div",{onClick:()=>S("presencial"),style:{flex:1,background:g==="presencial"?"rgba(0, 183, 216, 0.1)":r.lightBg,border:g==="presencial"?`2px solid ${r.primary}`:`2px solid ${r.lightGrey}`,borderRadius:8,padding:"10px 12px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8,transition:"all 0.2s ease"},children:[e.jsx("div",{style:{width:18,height:18,borderRadius:"50%",border:`2px solid ${g==="presencial"?r.primary:r.lightGrey}`,display:"flex",alignItems:"center",justifyContent:"center"},children:g==="presencial"&&e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:r.primary}})}),e.jsx("span",{style:{fontSize:14,color:g==="presencial"?r.primary:r.textDark,fontWeight:g==="presencial"?500:"normal"},children:"Presencial"})]}),e.jsxs("div",{onClick:()=>S("virtual"),style:{flex:1,background:g==="virtual"?"rgba(0, 183, 216, 0.1)":r.lightBg,border:g==="virtual"?`2px solid ${r.primary}`:`2px solid ${r.lightGrey}`,borderRadius:8,padding:"10px 12px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8,transition:"all 0.2s ease"},children:[e.jsx("div",{style:{width:18,height:18,borderRadius:"50%",border:`2px solid ${g==="virtual"?r.primary:r.lightGrey}`,display:"flex",alignItems:"center",justifyContent:"center"},children:g==="virtual"&&e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:r.primary}})}),e.jsx("span",{style:{fontSize:14,color:g==="virtual"?r.primary:r.textDark,fontWeight:g==="virtual"?500:"normal"},children:"Virtual"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:16},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:["Edad ",e.jsx("span",{style:{color:r.danger},children:"*"})]}),e.jsx("input",{type:"number",value:w,onChange:o=>{F(o.target.value),o.target.value&&c({...s,age:null})},min:"10",max:"25",placeholder:"Edad",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:s.age?`1px solid ${r.danger}`:`1px solid ${r.lightGrey}`,fontSize:14}}),s.age&&e.jsx("p",{style:{color:r.danger,margin:"4px 0 0 0",fontSize:12},children:s.age})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:["Curso ",e.jsx("span",{style:{color:r.danger},children:"*"})]}),e.jsx("select",{value:k,onChange:o=>{_(o.target.value),o.target.value&&c({...s,course:null})},style:{width:"100%",padding:"10px 12px",borderRadius:8,border:s.course?`1px solid ${r.danger}`:`1px solid ${r.lightGrey}`,fontSize:14,appearance:"none",backgroundImage:`url("data:image/svg+xml;utf8,<svg fill='black' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/><path d='M0 0h24v24H0z' fill='none'/></svg>")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 10px center",backgroundColor:"white"},children:X.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))}),s.course&&e.jsx("p",{style:{color:r.danger,margin:"4px 0 0 0",fontSize:12},children:s.course})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:["Sexo ",e.jsx("span",{style:{color:r.danger},children:"*"})]}),e.jsx("select",{value:C,onChange:o=>{M(o.target.value),o.target.value&&c({...s,gender:null})},style:{width:"100%",padding:"10px 12px",borderRadius:8,border:s.gender?`1px solid ${r.danger}`:`1px solid ${r.lightGrey}`,fontSize:14,appearance:"none",backgroundImage:`url("data:image/svg+xml;utf8,<svg fill='black' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/><path d='M0 0h24v24H0z' fill='none'/></svg>")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 10px center",backgroundColor:"white"},children:U.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))}),s.gender&&e.jsx("p",{style:{color:r.danger,margin:"4px 0 0 0",fontSize:12},children:s.gender})]})]})]}),e.jsxs("div",{style:{background:"white",padding:16,borderRadius:12,marginBottom:16,boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[e.jsx("h2",{style:{fontSize:18,margin:"0 0 16px 0",color:r.textDark},children:"Motivo de consulta"}),e.jsx(f,{options:Y,selected:a,onChange:oe,title:"Seleccione los motivos de consulta"}),s.consultationReasons&&e.jsx("p",{style:{color:r.danger,margin:"4px 0 16px 0",fontSize:12},children:s.consultationReasons}),a.includes("salud_mental")&&e.jsx("div",{style:{marginBottom:16},children:e.jsx(f,{options:Z,selected:b,onChange:le,title:"Especifique problemas de salud mental"})}),a.includes("acoso")&&e.jsx("div",{style:{marginBottom:16},children:e.jsx(f,{options:D,selected:m,onChange:se,title:"Especifique tipo de acoso"})}),a.includes("adicciones")&&e.jsx("div",{style:{marginBottom:16},children:e.jsx(f,{options:ee,selected:v,onChange:te,title:"Especifique tipo de adicción"})}),a.includes("otro")&&e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:["Especifique otro motivo ",e.jsx("span",{style:{color:r.danger},children:"*"})]}),e.jsx("input",{type:"text",value:O,onChange:o=>{H(o.target.value),o.target.value.trim()&&c({...s,otherReason:null})},placeholder:"Describa el motivo de consulta",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:s.otherReason?`1px solid ${r.danger}`:`1px solid ${r.lightGrey}`,fontSize:14}}),s.otherReason&&e.jsx("p",{style:{color:r.danger,margin:"4px 0 0 0",fontSize:12},children:s.otherReason})]}),(a.includes("acoso")||a.includes("salud_mental")&&(b.includes("autolesiones")||b.includes("ideacion_suicida"))||a.includes("adicciones"))&&e.jsxs(y,{type:"danger",children:[e.jsx("strong",{children:"¡Importante!"})," Recuerda que este tipo de consulta debe notificarse siempre al centro educativo para poder activar los protocolos apropiados."]})]}),e.jsxs("div",{style:{background:"white",padding:16,borderRadius:12,marginBottom:16,boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[e.jsx("h2",{style:{fontSize:18,margin:"0 0 16px 0",color:r.textDark},children:"Intervención"}),e.jsx(f,{options:re,selected:p,onChange:ne,title:"Tipo de intervención realizada"}),s.interventionTypes&&e.jsx("p",{style:{color:r.danger,margin:"4px 0 16px 0",fontSize:12},children:s.interventionTypes}),p.includes("derivacion")&&e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:["Detalles de la derivación ",e.jsx("span",{style:{color:r.danger},children:"*"})]}),e.jsx("textarea",{value:E,onChange:o=>{L(o.target.value),o.target.value.trim()&&c({...s,referralDetails:null})},placeholder:"Especifique a dónde se deriva y motivo",rows:3,style:{width:"100%",padding:"10px 12px",borderRadius:8,border:s.referralDetails?`1px solid ${r.danger}`:`1px solid ${r.lightGrey}`,fontSize:14,resize:"vertical"}}),s.referralDetails&&e.jsx("p",{style:{color:r.danger,margin:"4px 0 0 0",fontSize:12},children:s.referralDetails})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:r.textDark},children:"Notas adicionales"}),e.jsx("textarea",{value:N,onChange:o=>J(o.target.value),placeholder:"Observaciones, recomendaciones, etc.",rows:4,style:{width:"100%",padding:"10px 12px",borderRadius:8,border:`1px solid ${r.lightGrey}`,fontSize:14,resize:"vertical"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:16,marginTop:24},children:[e.jsx("button",{type:"button",onClick:$,style:{flex:1,padding:"12px",background:"white",border:`1px solid ${r.lightGrey}`,borderRadius:8,color:r.textDark,fontSize:14,fontWeight:500,cursor:"pointer"},children:"Cancelar"}),e.jsx("button",{type:"submit",style:{flex:1,padding:"12px",background:r.primary,border:"none",borderRadius:8,color:"white",fontSize:14,fontWeight:500,cursor:"pointer"},children:l?"Actualizar consulta":"Guardar consulta"})]})]})]})};export{me as default};
