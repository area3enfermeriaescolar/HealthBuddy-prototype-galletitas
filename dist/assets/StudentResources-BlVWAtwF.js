import{q as M,d as C,e as w,w as P,o as E,f as T,g as V,c as W,r as u,j as e}from"./index-CAa7WQB5.js";/* empty css                         */const G=async n=>{try{const s=await V(C(w,"resourceConsultations"),{...n,timestamp:new Date});return console.log("Documento de consulta de recurso escrito con ID: ",s.id),s.id}catch(s){throw console.error("Error al aÃ±adir documento de consulta de recurso: ",s),s}},q=(n,s)=>{try{const d=M(C(w,"resourceConsultations"),P("studentId","==",n),E("timestamp","desc"));return T(d,p=>{const m=[];p.forEach(g=>{m.push({id:g.id,...g.data()})}),s(m)})}catch(d){throw console.error("Error al obtener consultas de recursos por estudiante: ",d),d}},i={primary:"#00B7D8",cardBg:"#FFFFFF",lightBg:"#F5FBFD",textDark:"#002D3A",textMedium:"#4A6572"};function L(){return e.jsx("div",{style:{position:"fixed",top:10,right:10,background:"#00B7D8",color:"#fff",padding:"4px 12px",borderRadius:20,fontSize:"0.75rem",fontWeight:600,letterSpacing:.5,zIndex:1e3},children:"DEMO"})}function O({active:n="resources",onNavigate:s}){const d=[{id:"home",label:"Inicio",icon:"ðŸ "},{id:"chat",label:"Chat",icon:"ðŸ’¬"},{id:"appointments",label:"Citas",icon:"ðŸ“…"},{id:"resources",label:"Recursos",icon:"ðŸ“š"}];return e.jsx("div",{className:"bottom-navigation",style:{position:"fixed",left:0,right:0,bottom:0,background:"#fff",boxShadow:"0 -2px 8px rgba(0,0,0,0.08)",display:"flex",justifyContent:"space-around",padding:"0.6rem 0",zIndex:20},children:d.map(l=>e.jsxs("div",{className:`nav-item ${l.id===n?"active":""}`,style:{textAlign:"center",cursor:"pointer"},onClick:()=>s&&s(l.id),children:[e.jsx("div",{style:{fontSize:"1.6rem"},children:l.icon}),e.jsx("span",{style:{fontSize:12,color:l.id===n?i.primary:i.textMedium},children:l.label})]},l.id))})}const v=[{id:"mental",icon:"ðŸ§ ",label:"Salud mental",color:"#e3f2fd"},{id:"nutrition",icon:"ðŸ¥—",label:"NutriciÃ³n",color:"#e8f5e9"},{id:"exercise",icon:"ðŸ’ª",label:"Actividad fÃ­sica",color:"#fff3e0"},{id:"sexual",icon:"â¤ï¸",label:"Sexualidad",color:"#f3e5f5"},{id:"addictions",icon:"ðŸš­",label:"Adicciones",color:"#e0f7fa"},{id:"wellbeing",icon:"ðŸ§˜",label:"Bienestar",color:"#fffde7"}],c={mental:[{id:1,title:"Manejo del estrÃ©s en exÃ¡menes",type:"GuÃ­a PDF",icon:"ðŸ“„",description:"TÃ©cnicas efectivas para reducir la ansiedad antes y durante los exÃ¡menes."},{id:2,title:"Meditaciones guiadas para dormir mejor",type:"Audio",icon:"ðŸŽ§",description:"ColecciÃ³n de audios de 5-15 minutos para mejorar la calidad del sueÃ±o."},{id:3,title:"Ansiedad: cÃ³mo reconocerla y manejarla",type:"ArtÃ­culo",icon:"ðŸ“",description:"InformaciÃ³n sobre sÃ­ntomas de ansiedad y estrategias para su manejo diario."},{id:4,title:"Mindfulness para adolescentes",type:"VÃ­deo",icon:"ðŸŽ¬",description:"Tutorial de 10 minutos con ejercicios bÃ¡sicos de atenciÃ³n plena."}],nutrition:[{id:5,title:"Plan semanal de desayunos saludables",type:"ArtÃ­culo",icon:"ðŸ“",description:"Ideas variadas y nutritivas para empezar el dÃ­a con energÃ­a."},{id:6,title:"CÃ³mo leer etiquetas de alimentos",type:"VÃ­deo",icon:"ðŸŽ¬",description:"GuÃ­a prÃ¡ctica para entender la informaciÃ³n nutricional de los productos."},{id:7,title:"Mitos y realidades sobre las dietas",type:"InfografÃ­a",icon:"ðŸ“Š",description:"AnÃ¡lisis de las dietas mÃ¡s populares y su base cientÃ­fica."},{id:8,title:"NutriciÃ³n para deportistas jÃ³venes",type:"GuÃ­a PDF",icon:"ðŸ“„",description:"Recomendaciones especÃ­ficas para optimizar el rendimiento deportivo."}],exercise:[{id:9,title:"Rutina de 15 min sin material",type:"VÃ­deo",icon:"ðŸŽ¬",description:"Ejercicios sencillos que puedes hacer en cualquier lugar."},{id:10,title:"Estiramientos para despuÃ©s de estudiar",type:"InfografÃ­a",icon:"ðŸ“Š",description:"Secuencia de estiramientos para aliviar la tensiÃ³n despuÃ©s de largas horas sentado."},{id:11,title:"Beneficios del ejercicio para el cerebro",type:"ArtÃ­culo",icon:"ðŸ“",description:"CÃ³mo la actividad fÃ­sica mejora la concentraciÃ³n y el aprendizaje."},{id:12,title:"Plan de entrenamiento de 4 semanas",type:"GuÃ­a PDF",icon:"ðŸ“„",description:"Programa progresivo para mejorar tu condiciÃ³n fÃ­sica general."}],sexual:[{id:13,title:"MÃ©todos anticonceptivos: guÃ­a completa",type:"GuÃ­a PDF",icon:"ðŸ“„",description:"InformaciÃ³n detallada sobre todos los mÃ©todos disponibles, ventajas y desventajas."},{id:14,title:"PrevenciÃ³n de ETS",type:"InfografÃ­a",icon:"ðŸ“Š",description:"InformaciÃ³n esencial sobre enfermedades de transmisiÃ³n sexual y cÃ³mo prevenirlas."},{id:15,title:"Consentimiento y relaciones saludables",type:"VÃ­deo",icon:"ðŸŽ¬",description:"ExplicaciÃ³n sobre la importancia del consentimiento en las relaciones."},{id:16,title:"Preguntas frecuentes sobre sexualidad",type:"ArtÃ­culo",icon:"ðŸ“",description:"Respuestas a las dudas mÃ¡s comunes entre adolescentes."}],addictions:[{id:17,title:"Efectos del tabaco en el organismo",type:"InfografÃ­a",icon:"ðŸ“Š",description:"Consecuencias del tabaquismo a corto y largo plazo."},{id:18,title:"Alcohol y cerebro adolescente",type:"ArtÃ­culo",icon:"ðŸ“",description:"CÃ³mo afecta el alcohol al desarrollo cerebral en la adolescencia."},{id:19,title:"Uso responsable de redes sociales",type:"GuÃ­a PDF",icon:"ðŸ“„",description:"Consejos para evitar la adicciÃ³n a las pantallas y redes sociales."},{id:20,title:"Mitos sobre las drogas",type:"VÃ­deo",icon:"ðŸŽ¬",description:"InformaciÃ³n basada en evidencia sobre sustancias y sus efectos reales."}],wellbeing:[{id:21,title:"TÃ©cnicas de respiraciÃ³n para la calma",type:"Audio",icon:"ðŸŽ§",description:"Ejercicios guiados de respiraciÃ³n para momentos de estrÃ©s."},{id:22,title:"HÃ¡bitos para un mejor descanso",type:"ArtÃ­culo",icon:"ðŸ“",description:"Consejos prÃ¡cticos para mejorar la calidad del sueÃ±o."},{id:23,title:"GestiÃ³n del tiempo para estudiantes",type:"GuÃ­a PDF",icon:"ðŸ“„",description:"MÃ©todos efectivos para organizar el estudio y el tiempo libre."},{id:24,title:"Yoga bÃ¡sico para principiantes",type:"VÃ­deo",icon:"ðŸŽ¬",description:"Secuencia de 20 minutos ideal para iniciarse en el yoga."}]},y=({resource:n,onSelect:s})=>e.jsxs("div",{onClick:()=>s(n),style:{background:i.cardBg,borderRadius:12,padding:"1rem",marginBottom:12,boxShadow:"0 2px 6px rgba(0,0,0,0.05)",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease",":hover":{transform:"translateY(-2px)",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"}},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:12},children:[e.jsx("div",{style:{fontSize:24,background:i.lightBg,borderRadius:8,width:40,height:40,display:"flex",alignItems:"center",justifyContent:"center"},children:n.icon}),e.jsxs("div",{style:{flex:1},children:[e.jsx("p",{style:{margin:0,fontWeight:600,color:i.textDark},children:n.title}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:4},children:[e.jsx("span",{style:{fontSize:12,color:i.textMedium},children:n.type}),e.jsxs("span",{style:{color:i.primary,fontSize:14,fontWeight:600,display:"flex",alignItems:"center",gap:4},children:["Ver ",e.jsx("span",{style:{fontSize:18},children:"â†’"})]})]})]})]}),n.description&&e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:13,color:i.textMedium,lineHeight:1.4},children:n.description})]}),N=({resource:n,onBack:s})=>e.jsxs("div",{style:{background:"white",borderRadius:12,padding:"1.5rem",marginBottom:16,boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:[e.jsxs("button",{onClick:s,style:{background:"none",border:"none",color:i.primary,fontSize:15,marginBottom:16,display:"flex",alignItems:"center",gap:4,padding:0,cursor:"pointer"},children:[e.jsx("span",{style:{fontSize:20},children:"â†"})," Volver"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:16},children:[e.jsx("div",{style:{fontSize:32,background:i.lightBg,borderRadius:12,width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center"},children:n.icon}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:20,color:i.textDark},children:n.title}),e.jsx("span",{style:{background:i.primary,color:"white",borderRadius:16,padding:"2px 10px",fontSize:12,display:"inline-block",marginTop:6},children:n.type})]})]}),e.jsx("p",{style:{margin:"0 0 20px 0",fontSize:15,color:i.textMedium,lineHeight:1.5},children:n.description}),n.type==="GuÃ­a PDF"&&e.jsxs("div",{style:{background:"#f5f5f5",borderRadius:8,padding:"1rem",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:40,marginBottom:10},children:"ðŸ“„"}),e.jsx("p",{style:{margin:0,fontWeight:500},children:"GuÃ­a en formato PDF"}),e.jsxs("button",{style:{background:i.primary,color:"white",border:"none",borderRadius:20,padding:"8px 16px",marginTop:12,cursor:"pointer",fontWeight:500,display:"flex",alignItems:"center",gap:6,margin:"12px auto 0"},children:[e.jsx("span",{children:"â¬‡ï¸"})," Descargar PDF"]})]}),n.type==="VÃ­deo"&&e.jsx("div",{style:{background:"#f5f5f5",borderRadius:8,padding:"1rem",textAlign:"center",position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden"},children:e.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[e.jsx("div",{style:{fontSize:60,marginBottom:16},children:"ðŸŽ¬"}),e.jsx("p",{style:{margin:0,fontWeight:500},children:"VÃ­deo demostrativo"}),e.jsxs("button",{style:{background:i.primary,color:"white",border:"none",borderRadius:20,padding:"8px 16px",marginTop:16,cursor:"pointer",fontWeight:500,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{children:"â–¶ï¸"})," Reproducir vÃ­deo"]})]})}),n.type==="Audio"&&e.jsxs("div",{style:{background:"#f5f5f5",borderRadius:8,padding:"1rem",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:40,marginBottom:10},children:"ðŸŽ§"}),e.jsx("p",{style:{margin:0,fontWeight:500},children:"Audio guiado"}),e.jsxs("div",{style:{background:"white",borderRadius:20,padding:"8px 16px",margin:"12px auto",display:"flex",alignItems:"center",gap:8,maxWidth:250},children:[e.jsx("button",{style:{background:i.primary,color:"white",border:"none",borderRadius:"50%",width:36,height:36,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:18},children:"â–¶ï¸"}),e.jsx("div",{style:{flex:1,height:4,background:"#eee",borderRadius:2},children:e.jsx("div",{style:{width:"30%",height:"100%",background:i.primary,borderRadius:2}})}),e.jsx("span",{style:{fontSize:12,color:i.textMedium},children:"5:23"})]})]}),(n.type==="ArtÃ­culo"||n.type==="InfografÃ­a")&&e.jsxs("div",{style:{background:"#f5f5f5",borderRadius:8,padding:"1rem",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:40,marginBottom:10},children:n.type==="ArtÃ­culo"?"ðŸ“":"ðŸ“Š"}),e.jsx("p",{style:{margin:0,fontWeight:500},children:n.type}),e.jsxs("button",{style:{background:i.primary,color:"white",border:"none",borderRadius:20,padding:"8px 16px",marginTop:12,cursor:"pointer",fontWeight:500,display:"flex",alignItems:"center",gap:6,margin:"12px auto 0"},children:[e.jsx("span",{children:"ðŸ‘ï¸"})," Leer completo"]})]}),e.jsxs("div",{style:{marginTop:24,padding:"12px 16px",background:"rgba(0,183,216,0.1)",borderRadius:8,display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:20},children:"ðŸ’¬"}),e.jsx("p",{style:{margin:0,fontSize:14,color:i.textDark},children:"Â¿Tienes dudas sobre este tema? Puedes consultar con tu enfermera escolar a travÃ©s del chat."})]})]});function U({onNavigate:n}){const{currentUser:s}=W(),[d,l]=u.useState(null),[p,m]=u.useState(""),[g,S]=u.useState(null),[h,b]=u.useState([]),[R,k]=u.useState([]),[Y,B]=u.useState([]);u.useEffect(()=>{const t=[c.sexual[0],c.mental[0],c.addictions[3],c.wellbeing[2]];if(k(t),s){const o=q(s.uid,r=>{B(r);const a=r.sort((x,j)=>j.consultedAt.toDate()-x.consultedAt.toDate()).slice(0,5).map(x=>{for(const j of Object.values(c)){const z=j.find(F=>F.id.toString()===x.resourceId);if(z)return z}return null}).filter(Boolean);b(a)});return()=>o()}else{const o=[c.sexual[2],c.nutrition[0]];b(o)}},[s]);const I=()=>{if(!p.trim())return[];const t=p.toLowerCase(),o=[];return Object.values(c).forEach(r=>{r.forEach(a=>{(a.title.toLowerCase().includes(t)||a.description.toLowerCase().includes(t)||a.type.toLowerCase().includes(t))&&o.push(a)})}),o},D=t=>{for(const[o,r]of Object.entries(c))if(r.some(a=>a.id===t)){const a=v.find(x=>x.id===o);return a?a.label:"Sin categorÃ­a"}return"Sin categorÃ­a"},f=async t=>{if(S(t),s)try{const o={studentId:s.uid,resourceId:t.id.toString(),resourceTitle:t.title,resourceType:t.type,resourceCategory:D(t.id),consultedAt:new Date};await G(o),console.log(`Recurso "${t.title}" consultado exitosamente por ${s.alias||s.email}!`)}catch(o){console.error("Error al registrar la consulta del recurso:",o)}h.some(o=>o.id===t.id)||b(o=>[t,...o].slice(0,5))},A=()=>{if(g)return e.jsx(N,{resource:g,onBack:()=>S(null)});if(p.trim()){const t=I();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("h2",{style:{margin:0,fontSize:18},children:"Resultados"}),e.jsxs("span",{style:{background:i.lightBg,padding:"4px 10px",borderRadius:16,fontSize:14,color:i.textMedium},children:[t.length," encontrados"]})]}),t.length>0?t.map(o=>e.jsx(y,{resource:o,onSelect:f},o.id)):e.jsxs("div",{style:{textAlign:"center",padding:"30px 0",color:i.textMedium,background:"white",borderRadius:12},children:[e.jsx("div",{style:{fontSize:40,marginBottom:16},children:"ðŸ”"}),e.jsxs("p",{children:['No se encontraron resultados para "',p,'"']}),e.jsx("button",{onClick:()=>m(""),style:{background:i.primary,color:"white",border:"none",borderRadius:20,padding:"8px 16px",marginTop:16,cursor:"pointer"},children:"Mostrar todos"})]})]})}if(d){const t=c[d]||[],o=v.find(r=>r.id===d);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:16},children:[e.jsx("button",{onClick:()=>l(null),style:{background:"none",border:"none",color:i.primary,fontSize:16,display:"flex",alignItems:"center",gap:4,padding:0,cursor:"pointer"},children:e.jsx("span",{style:{fontSize:20},children:"â†"})}),e.jsxs("h2",{style:{margin:0,fontSize:18,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:24},children:o==null?void 0:o.icon}),o==null?void 0:o.label]})]}),t.map(r=>e.jsx(y,{resource:r,onSelect:f},r.id))]})}return e.jsxs(e.Fragment,{children:[e.jsx("h2",{style:{fontSize:18,marginBottom:12},children:"CategorÃ­as"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginBottom:24},children:v.map(t=>e.jsxs("div",{onClick:()=>l(t.id),style:{background:t.color,borderRadius:12,padding:"1rem",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",transition:"transform 0.2s ease",":hover":{transform:"scale(1.03)"}},children:[e.jsx("div",{style:{fontSize:32,marginBottom:8},children:t.icon}),e.jsx("span",{style:{fontWeight:500,color:i.textDark},children:t.label})]},t.id))}),R.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{style:{fontSize:18,marginBottom:12},children:"Populares"}),R.map(t=>e.jsx(y,{resource:t,onSelect:f},t.id))]}),h.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{style:{fontSize:18,marginBottom:12,marginTop:24},children:s?"Consultados recientemente":"Vistos recientemente"}),h.map(t=>e.jsx(y,{resource:t,onSelect:f},t.id))]})]})};return e.jsxs("div",{style:{padding:"1rem",paddingBottom:80},children:[e.jsx(L,{}),e.jsx("h1",{style:{marginBottom:16},children:"Recursos"}),e.jsxs("div",{style:{position:"relative",marginBottom:24},children:[e.jsx("input",{value:p,onChange:t=>m(t.target.value),placeholder:"Buscar recursos...",style:{width:"100%",padding:"0.7rem 1rem 0.7rem 2.5rem",border:`2px solid ${i.primary}`,borderRadius:20,fontSize:15}}),e.jsx("span",{style:{position:"absolute",left:12,top:"50%",transform:"translateY(-50%)",color:i.textMedium,fontSize:18},children:"ðŸ”"}),p&&e.jsx("button",{onClick:()=>m(""),style:{position:"absolute",right:12,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:i.textMedium,cursor:"pointer",fontSize:18},children:"âœ•"})]}),A(),e.jsx(O,{active:"resources",onNavigate:n})]})}export{U as default};
